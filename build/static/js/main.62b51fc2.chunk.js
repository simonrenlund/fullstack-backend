(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=(t(20),t(2)),l=t(3),s=t.n(l),i="api/persons",m=function(){return s.a.get(i).then(function(e){return e.data})},d=function(e){return s.a.post(i,e).then(function(e){return e.data})},f=function(e,n){return s.a.put("".concat(i,"/").concat(e),n).then(function(e){return e.data})},p=function(e){return s.a.delete("".concat(i,"/").concat(e))},h=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:n.type},n.msg)},g=function(e){var n=e.person,t=e.deleteEntry;return!0===n.display?r.a.createElement("div",null,n.name," ",n.number," ",r.a.createElement("button",{id:n.id,name:n.name,type:"button",onClick:t},"Delete")):r.a.createElement("span",null)},E=function(e){var n=e.search,t=e.searchChange;return r.a.createElement("div",null,"Search: ",r.a.createElement("input",{value:n,onChange:t}))},b=function(e){var n=e.persons,t=e.deleteEntry;return r.a.createElement("div",null,n.map(function(e){return r.a.createElement(g,{key:e.name,person:e,deleteEntry:t})}))},v=function(e){var n=e.newName,t=e.newNumber,a=e.inputChange,u=e.addPerson;return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,"name: ",r.a.createElement("input",{id:"name",value:n,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{id:"number",value:t,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},y=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),s=l[0],i=l[1],g=Object(a.useState)(""),y=Object(o.a)(g,2),w=y[0],j=y[1],O=Object(a.useState)(""),C=Object(o.a)(O,2),k=C[0],P=C[1],S=Object(a.useState)(""),N=Object(o.a)(S,2),T=N[0],x=N[1];Object(a.useEffect)(function(){m().then(function(e){e.forEach(function(e){e.display=!0}),u(e)})},[]);return r.a.createElement("div",null,r.a.createElement(h,{message:T}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{search:k,searchChange:function(e){P(e.target.value);var n=e.target.value.toLowerCase();t.forEach(function(e){e.name.toLowerCase().includes(n)||""===n?e.display=!0:e.display=!1}),u(t)}}),r.a.createElement("h2",null,"Add new number"),r.a.createElement(v,{newName:s,newNumber:w,inputChange:function(e){"name"===e.target.id?i(e.target.value):j(e.target.value)},addPerson:function(e){e.preventDefault();var n=0;if(t.forEach(function(e){if(e.name===s)if(n=1,e.number===w)alert(s+" is already added to the phonebook.");else if(window.confirm(s+" is already added to the phonebook, do you want to update the number?")){var a=e.id,r={name:s,number:w,display:!0};f(a,r).then(function(e){u(t.map(function(n){return n.id!==a?n:e}));var n={msg:e.name+" was updated successfully!",type:"message success"};x(n),setTimeout(function(){x(null)},3e3)}).catch(function(e){x({msg:"Person "+r.name+" does not exist on the server. Please reload the page.",type:"message error"}),setTimeout(function(){x(null)},3e3)})}}),1===n)return i(""),void j("");d({name:s,number:w,display:!0}).then(function(e){u(t.concat(e)),x({msg:e.name+" was added successfully!",type:"message success"}),setTimeout(function(){x(null)},3e3)}).catch(function(e){x({msg:e.response.data.error,type:"message error"}),setTimeout(function(){x(null)},3e3)}),i(""),j("")}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(b,{persons:t,deleteEntry:function(e){if(window.confirm("Really delete "+e.target.name+"?")){var n=e.target.name;p(e.target.id).then(function(e){x({msg:"Record was deleted successfully!",type:"message success"}),setTimeout(function(){x(null)},3e3),m().then(function(e){u(e)})}).catch(function(e){x({msg:"Person "+n+" was already removed from server. Please reload the page.",type:"message error"}),setTimeout(function(){x(null)},3e3)})}}}))};c.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.62b51fc2.chunk.js.map