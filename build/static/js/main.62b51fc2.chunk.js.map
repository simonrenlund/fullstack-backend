{"version":3,"sources":["services/backend.js","App.js","index.js"],"names":["baseUrl","backend","axios","get","then","response","data","newObject","post","id","put","concat","delete","Notification","_ref","message","react_default","a","createElement","className","type","msg","Number","_ref2","person","deleteEntry","display","name","number","onClick","Filter","_ref3","search","searchChange","value","onChange","Persons","_ref4","persons","map","App_Number","key","PersonForm","_ref5","newName","newNumber","inputChange","addPerson","onSubmit","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setSearch","_useState9","_useState10","setMessage","useEffect","p","forEach","item","App_Notification","App_Filter","event","target","s","toLowerCase","includes","App_PersonForm","preventDefault","same","alert","window","confirm","newPerson","newMessage","setTimeout","catch","error","App_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.62b51fc2.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst del = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  del\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport backend from './services/backend'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  return (\r\n    <div className={message.type}>\r\n      {message.msg}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Number = ({person,deleteEntry}) => {\r\n  if (person.display === true) {\r\n      return <div>{person.name} {person.number} <button id={person.id} name={person.name} type=\"button\" onClick={deleteEntry}>Delete</button></div>\r\n  } else { return <span></span>\r\n  }\r\n}\r\n\r\nconst Filter = ({search, searchChange}) => {\r\n  return(\r\n    <div>\r\n      Search: <input value={search} onChange={searchChange}></input>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Persons = ({persons, deleteEntry}) => {\r\n  const Numbers = () => persons.map(person =>\r\n    <Number key={person.name} person={person} deleteEntry={deleteEntry} />\r\n    )\r\n  return <div>{Numbers()}</div>\r\n}\r\n\r\nconst PersonForm = ({newName,newNumber,inputChange,addPerson}) => {\r\n  return(\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        name: <input id=\"name\" value={newName} onChange={inputChange} />\r\n      </div>\r\n      <div>\r\n        number: <input id=\"number\" value={newNumber} onChange={inputChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nconst App = () => {\r\n  //useStates\r\n  const [ persons, setPersons] = useState([/*\r\n    { name: 'Arto Hellas', number: '040-123456', display: true},\r\n    { name: 'Ada Lovelace', number: '39-44-5323523', display: true },\r\n    { name: 'Dan Abramov', number: '12-43-234345', display: true },\r\n    { name: 'Mary Poppendieck', number: '39-23-6423122', display: true }*/\r\n  ])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [search, setSearch] = useState('')\r\n  const [message, setMessage] = useState('')\r\n  useEffect(() => {\r\n      //console.log('effect')\r\n      backend\r\n      .getAll()\r\n      .then(p => {\r\n        p.forEach(function(item) {\r\n          item.display = true\r\n        })\r\n        setPersons(p)\r\n      })\r\n\r\n    },[])\r\n\r\n  //App functions\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    let same = 0\r\n    persons.forEach(function(item) {\r\n      if (item.name === newName) {\r\n        same = 1\r\n        if (item.number === newNumber) {\r\n          alert(newName + ' is already added to the phonebook.')\r\n        } else if(window.confirm(newName + ' is already added to the phonebook, do you want to update the number?')) {\r\n          const id = item.id\r\n          const newObject = {\r\n            name: newName,\r\n            number: newNumber,\r\n            display: true\r\n          }\r\n          backend.update(id,newObject).then(newPerson => {\r\n            setPersons(persons.map(person => person.id !== id ? person : newPerson))\r\n            const newMessage = {\r\n              msg: newPerson.name + ' was updated successfully!',\r\n              type: 'message success'\r\n            }\r\n            setMessage(newMessage)\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 3000)\r\n          }).catch(error => {\r\n            setMessage(\r\n              {\r\n                msg: `Person `+ newObject.name +` does not exist on the server. Please reload the page.`,\r\n                type: 'message error'\r\n              }\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 3000)\r\n          })\r\n        }\r\n      }\r\n      return\r\n    })\r\n    if (same === 1) {\r\n      setNewName('')\r\n      setNewNumber('')\r\n      return\r\n    }\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      display: true\r\n    }\r\n    backend.create(nameObject).then(person => {\r\n      setPersons(persons.concat(person))\r\n      setMessage({\r\n        msg: person.name + ' was added successfully!',\r\n        type: 'message success'\r\n      })\r\n      setTimeout(() => {\r\n          setMessage(null)\r\n        }, 3000)\r\n\r\n    }).catch(error => {\r\n      setMessage(\r\n        {\r\n          msg: error.response.data.error,\r\n          type: 'message error'\r\n        }\r\n      )\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 3000)\r\n    })\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const inputChange = (event) => {\r\n    if (event.target.id === \"name\") {\r\n      setNewName(event.target.value)\r\n    } else {\r\n      setNewNumber(event.target.value)\r\n    }\r\n  }\r\n\r\n  const searchChange = (event) => {\r\n    setSearch(event.target.value)\r\n    const s = event.target.value.toLowerCase()\r\n    persons.forEach(function(item) {\r\n      const n = item.name.toLowerCase()\r\n      if (n.includes(s) || s === '') {\r\n        item.display = true\r\n      } else {\r\n        item.display = false\r\n      }\r\n    })\r\n    setPersons(persons)\r\n  }\r\n\r\n  const deleteEntry = (event) => {\r\n    if(window.confirm('Really delete ' + event.target.name +'?')) {\r\n      const name = event.target.name\r\n      backend.del(event.target.id).then(response => {\r\n        const newMessage = {\r\n          msg: 'Record was deleted successfully!',\r\n          type: 'message success'\r\n        }\r\n        setMessage(newMessage)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 3000)\r\n        backend.getAll().then(p => {\r\n          setPersons(p)\r\n        })\r\n      }).catch(error => {\r\n        setMessage(\r\n          {\r\n            msg: `Person `+ name +` was already removed from server. Please reload the page.`,\r\n            type: 'message error'\r\n          }\r\n        )\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 3000)\r\n      })\r\n    }\r\n  }\r\n\r\n  //The render\r\n  return (\r\n    <div>\r\n      <Notification message={message} />\r\n      <h2>Phonebook</h2>\r\n      <Filter search={search} searchChange={searchChange}/>\r\n      <h2>Add new number</h2>\r\n      <PersonForm newName={newName} newNumber={newNumber} inputChange={inputChange} addPerson={addPerson}/>\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} deleteEntry={deleteEntry} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}